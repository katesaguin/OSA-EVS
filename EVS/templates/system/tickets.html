{% extends 'evs_index.html' %}
{% block title %}
<title>XU OSA - Tickets</title>
{% endblock title %}
{% block page_name %}
<h5><i class='bx bx-home-alt'></i>Tickets</h5>
{% endblock page_name %}
{% block content %}
<div class="content">
    <!-- TOOLBAR -->
<div class="controls">
                   <button>Filter</button>
                   <button for="sort"> Sort Ticket:</button>
                   <select id="sort">
                        <option value="Up">Ascending</option>
                        <option value="Down">Descending</option>
                    </select>
                   <input id="search" type="text" placeholder="Search Student">
                   <button id='dashboardSearch'>Search</button>
               </div>
    <!-- TABLE -->
    <table class="table" id="tickets">
    <thead>
        <tr>
            <th>Student Name</th>
            <th>Student ID</th>
            <th>Ticket #</th>
            <th>Violation Type</th>
            <th>Date/Time</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for ticket in tickets %}
            <tr>
                <td>{{ ticket.student.first_name }} {{ ticket.student.middle_name }} {{ ticket.student.last_name }}</td>
                <td>{{ ticket.student.student_id }}</td>
                <td>{{ ticket.ticket_id }}</td>
                <td>
                    {% if ticket.uniform_violation %}Uniform Violation, {% endif %}
                    {% if ticket.dress_code_violation %}Dress Code Violation, {% endif %}
                    {% if ticket.id_violation %}ID Violation, {% endif %}
                    {% if ticket.id_not_claimed_violation %}ID Not Claimed Violation{% endif %}
                </td>
                <td>{{ ticket.date_created }}</td>
                <td class="status-{{ ticket.ticket_status|yesno:'resolved,pending' }}">
                    {{ ticket.ticket_status|yesno:'Resolved,Pending' }}
                </td>
                <td class="actions">
                    <a href=>
                        <button><i class="fas fa-eye"></i> View & Edit</button>
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7">No tickets found.</td>
            </tr>
            {% endfor %}
        <tr>
            <td colspan="7">
                <div class="pagination">
                    <ul>
                        {% if tickets.has_previous %}
                        <li><a href="{% url 'ViolationTickets' %}?page={{ tickets.previous_page_number }}">&laquo; Previous</a></li>
                        {% endif %}
                        <li class="active"><span>{{ tickets.number }}</span></li>
                        {% if tickets.has_next %}
                        <li><a href="{% url 'ViolationTickets' %}?page={{ tickets.next_page_number }}">Next &raquo;</a></li>
                        {% endif %}
                    </ul>
                </div>
            </td>
        </tr>
    </tbody>
</table>
{% endblock content %}